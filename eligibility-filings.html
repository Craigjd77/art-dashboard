<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eligibility & Filings | FRT Work Tools</title>
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style-switcher.css">
    
    <style>
        .kpi-dashboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .kpi-card-featured {
            background: linear-gradient(135deg, var(--pbi-primary) 0%, var(--pbi-primary-dark) 100%);
            color: white;
        }
        
        .kpi-card-featured .kpi-label,
        .kpi-card-featured .kpi-value {
            color: white;
        }
        
        .kpi-card-success {
            background: #f0f9ff;
            border-left: 4px solid var(--chart-green);
        }
        
        .recent-claims-table {
            max-height: 250px;
            overflow-y: auto;
        }
        
        .recent-claims-table .data-table {
            font-size: 9px;
        }
        
        .recent-claims-table .data-table th,
        .recent-claims-table .data-table td {
            padding: 4px 6px;
        }
        
        .workflow-section {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 8px;
        }
        
        .organizer-damages-highlight {
            background: #fff4e5;
            border-left: 4px solid #ff8c00;
            padding: 8px;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="logo">FRT Work Tools</div>
            <div class="header-title">Financial Recovery Technologies LLC</div>
        </div>
        <div class="header-right">
            <div class="user-info">Craig D'Alessio</div>
            <button>Share</button>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <button class="nav-tab active">
            <i class="fas fa-file-check"></i>
            CLIENT ELIGIBILITY & FILINGS
        </button>
        <button class="nav-tab">
            <i class="fas fa-chart-line"></i>
            CLIENT STATUS REPORTS
        </button>
        <button class="nav-tab">
            <i class="fas fa-bell"></i>
            Client Opt-in Monitoring
        </button>
        <button class="nav-tab">
            <i class="fas fa-money-bill-wave"></i>
            Client Remittance
        </button>
        <button class="nav-tab">
            <i class="fas fa-user-tie"></i>
            Account Manager Dashboard
        </button>
        <button class="nav-tab">+</button>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel (Eligibility & Filings) -->
        <div class="left-panel">
            <!-- Client Selector -->
            <div class="client-selector">
                <label>Select a Client</label>
                <select id="clientSelect">
                    <option value="DEMOFRTCLIENT" selected>DEMOFRTCLIENT</option>
                    <option value="CLIENT2">Client 2</option>
                    <option value="CLIENT3">Client 3</option>
                </select>
            </div>

            <!-- KPI Cards -->
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-label">Recognized Loss</div>
                    <div class="kpi-value" id="recognizedLoss">$393.6M</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Est. Recovery (NET)</div>
                    <div class="kpi-value" id="estRecovery">$16.7M</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Total Est FRT Fees</div>
                    <div class="kpi-value" id="totalFees">$0.0</div>
                </div>
            </div>

            <!-- Toggle Buttons -->
            <div class="toggle-group">
                <button class="toggle-btn active" id="eligibleBtn">ELIGIBLE</button>
                <button class="toggle-btn" id="filedBtn">FILED</button>
            </div>

            <!-- Date Range -->
            <div class="date-range">
                <i class="fas fa-calendar-alt" style="color: var(--pbi-text-secondary);"></i>
                <input type="date" id="startDate" value="2013-04-25">
                <span>to</span>
                <input type="date" id="endDate" value="2026-04-14">
            </div>

            <!-- Recently Filed Claims -->
            <div class="viz-card">
                <div class="viz-title">Recently Filed Claims</div>
                <div class="recent-claims-table">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Case Name</th>
                                <th>Deadline</th>
                                <th style="text-align: right;">Loss</th>
                                <th style="text-align: center;">Accts</th>
                                <th>Filed Date</th>
                            </tr>
                        </thead>
                        <tbody id="recentClaimsBody">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <!-- KPI Dashboard - Key Metrics -->
            <div class="kpi-dashboard">
                <div class="kpi-card kpi-card-featured">
                    <div class="kpi-label">Total Organizer Damages</div>
                    <div class="kpi-value" style="font-size: 24px;">$393.6M</div>
                    <div style="font-size: 9px; opacity: 0.9; margin-top: 4px;">All eligible cases</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Cases Filed</div>
                    <div class="kpi-value" style="font-size: 24px;">127</div>
                    <div style="font-size: 9px; color: var(--pbi-text-secondary); margin-top: 4px;">Total filings</div>
                </div>
                <div class="kpi-card kpi-card-success">
                    <div class="kpi-label">Recoveries Received</div>
                    <div class="kpi-value" style="font-size: 24px; color: var(--chart-green);">$16.7M</div>
                    <div style="font-size: 9px; color: var(--pbi-text-secondary); margin-top: 4px;">Net recovery</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Pending Disbursements</div>
                    <div class="kpi-value" style="font-size: 24px;">$2.1M</div>
                    <div style="font-size: 9px; color: var(--pbi-text-secondary); margin-top: 4px;">Scheduled</div>
                </div>
            </div>

            <!-- Organizer Damages Highlight -->
            <div class="organizer-damages-highlight">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 10px; font-weight: 600; color: #ff8c00; margin-bottom: 2px;">ORGANIZER DAMAGES SUMMARY</div>
                        <div style="font-size: 9px; color: var(--pbi-text-secondary);">
                            This represents the total potential recovery amount if cases are successful. 
                            Organizer Damages are calculated before and after case registration.
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 18px; font-weight: 600; color: #ff8c00;">$393.59M</div>
                        <div style="font-size: 8px; color: var(--pbi-text-secondary);">Total Outstanding</div>
                    </div>
                </div>
            </div>

            <!-- Outstanding Recognized Loss / Damages Donut Chart -->
            <div class="viz-card">
                <div class="viz-title">Outstanding Recognized Loss / Damages</div>
                <div class="viz-subtitle">Filed Between: 06/28/2013 to 08/15/2025</div>
                <div class="donut-container">
                    <canvas id="outstandingDonutChart"></canvas>
                    <div class="donut-center">
                        <div class="donut-total">$393.59M</div>
                        <div class="donut-label">Total</div>
                    </div>
                </div>
            </div>

            <!-- Two Column: Account Details & Recognized Loss -->
            <div class="grid-2">
                <!-- Account Details Bar Chart -->
                <div class="viz-card">
                    <div class="viz-title">Account Details</div>
                    <div class="viz-subtitle">Organizer Damages by Account Name</div>
                    <div class="bar-chart-container" style="height: 250px;">
                        <canvas id="accountDetailsChart"></canvas>
                    </div>
                </div>

                <!-- Recognized Loss / Damages Bar Chart -->
                <div class="viz-card">
                    <div class="viz-title">Recognized Loss / Damages by Case</div>
                    <div class="viz-subtitle">Filed Between: 06/28/2013 to 08/15/2025</div>
                    <div class="bar-chart-container" style="height: 250px;">
                        <canvas id="recognizedLossChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recovery & Disbursement Preview -->
            <div class="viz-card">
                <div class="viz-title">
                    Recovery & Disbursement Preview
                    <span style="font-size: 9px; font-weight: 400; color: var(--pbi-text-secondary);">Recent payments and upcoming disbursements</span>
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Case Name</th>
                                <th>Status</th>
                                <th style="text-align: right;">Organizer Damages</th>
                                <th style="text-align: right;">Recovery Amount</th>
                                <th>Payment Date</th>
                                <th>Disbursement Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>GRAB HOLDINGS LIMITED</strong></td>
                                <td><span class="case-status-badge status-registered">REGISTERED</span></td>
                                <td class="currency">$37.0M</td>
                                <td class="currency">$1.2M</td>
                                <td class="date-cell">8/20/2025</td>
                                <td><span style="color: var(--chart-green); font-weight: 600;">Scheduled</span></td>
                            </tr>
                            <tr>
                                <td><strong>EMERGENT BIOSOLUTIONS INC</strong></td>
                                <td><span class="case-status-badge status-registered">REGISTERED</span></td>
                                <td class="currency">$53.0M</td>
                                <td class="currency">$850K</td>
                                <td class="date-cell">8/25/2025</td>
                                <td><span style="color: var(--chart-green); font-weight: 600;">Scheduled</span></td>
                            </tr>
                            <tr>
                                <td><strong>CERENCE INC</strong></td>
                                <td><span class="case-status-badge status-registered">REGISTERED</span></td>
                                <td class="currency">$42.0M</td>
                                <td class="currency">$650K</td>
                                <td class="date-cell">9/1/2025</td>
                                <td><span style="color: #ff8c00; font-weight: 600;">Pending</span></td>
                            </tr>
                            <tr>
                                <td><strong>EAGLE BANCORP INC Fair Fund</strong></td>
                                <td><span class="case-status-badge status-registered">REGISTERED</span></td>
                                <td class="currency">$24.0M</td>
                                <td class="currency">$240K</td>
                                <td class="date-cell">7/15/2025</td>
                                <td><span style="color: var(--chart-green); font-weight: 600;">Paid</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="page-info">
            <span>Page 5 of 21</span>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
            <span>Zoom: 97%</span>
        </div>
    </div>

    <!-- Style Switcher -->
    <script src="style-switcher.js"></script>

    <script>
        // Sample data from screenshot
        const recentClaimsData = [
            { caseName: 'ALLOVIR INC', deadline: '8/19/2025', loss: 277906, accounts: 2, filed: '8/15/2025' },
            { caseName: 'KOOTENAY ZINC CORP', deadline: '8/15/2025', loss: 0, accounts: 1, filed: '8/12/2025' },
            { caseName: 'GORES HOLDINGS IV INC', deadline: '8/13/2025', loss: 0, accounts: 2, filed: '' },
        ];

        const accountDetailsData = [
            { account: 'Broker CLIENT A', amount: 231000000 },
            { account: 'Broker CLIENT B', amount: 105000000 },
            { account: 'Private Wealth Client #1', amount: 46000000 },
            { account: 'Demo Account 1442781', amount: 9000000 },
            { account: 'Private Wealth Client #2', amount: 2000000 },
            { account: 'Demo Account 1443265', amount: 0 },
            { account: 'Demo Account 1422348', amount: 0 },
        ];

        const recognizedLossData = [
            { case: 'GRAB HOLDINGS LIMITED', amount: 37000000 },
            { case: 'EMERGENT BIOSOLUTIONS INC', amount: 53000000 },
            { case: 'CERENCE INC', amount: 42000000 },
            { case: 'ASTEC INDUSTRIES INC', amount: 12000000 },
            { case: 'EAGLE BANCORP INC Fair Fund', amount: 24000000 },
            { case: 'TUSIMPLE HOLDING INC', amount: 9000000 },
        ];

        const outstandingDonutData = {
            'Non-US Group': 150000000,
            'US/CA Settled': 243590000
        };

        function formatCurrency(amount) {
            if (amount >= 1000000) {
                return '$' + (amount / 1000000).toFixed(1) + 'M';
            } else if (amount >= 1000) {
                return '$' + (amount / 1000).toFixed(0) + 'K';
            }
            return '$' + amount.toLocaleString();
        }

        function populateRecentClaims() {
            const tbody = document.getElementById('recentClaimsBody');
            tbody.innerHTML = '';
            
            recentClaimsData.forEach(claim => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${claim.caseName}</td>
                    <td class="date-cell">${claim.deadline}</td>
                    <td class="currency">${formatCurrency(claim.loss)}</td>
                    <td style="text-align: center;">${claim.accounts}</td>
                    <td class="date-cell">${claim.filed || 'â€”'}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function createOutstandingDonutChart() {
            const ctx = document.getElementById('outstandingDonutChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(outstandingDonutData),
                    datasets: [{
                        data: Object.values(outstandingDonutData),
                        backgroundColor: ['#0078d4', '#ff8c00'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                padding: 15,
                                font: { size: 11 },
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + formatCurrency(context.parsed);
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        function createAccountDetailsChart() {
            const ctx = document.getElementById('accountDetailsChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: accountDetailsData.map(d => d.account),
                    datasets: [{
                        label: 'Organizer Damages',
                        data: accountDetailsData.map(d => d.amount),
                        backgroundColor: accountDetailsData.map((d, i) => 
                            d.amount === 0 ? '#e1dfdd' : (i % 2 === 0 ? '#0078d4' : '#005a9e')
                        ),
                        borderRadius: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Organizer Damages: ' + formatCurrency(context.parsed.x);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                },
                                font: { size: 9 }
                            },
                            grid: {
                                color: 'var(--pbi-border-light)'
                            }
                        },
                        y: {
                            ticks: {
                                font: { size: 9 }
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        function createRecognizedLossChart() {
            const ctx = document.getElementById('recognizedLossChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: recognizedLossData.map(d => d.case),
                    datasets: [{
                        label: 'Organizer Damages',
                        data: recognizedLossData.map(d => d.amount),
                        backgroundColor: '#0078d4',
                        borderRadius: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Organizer Damages: ' + formatCurrency(context.parsed.x);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 60000000,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                },
                                font: { size: 9 }
                            },
                            grid: {
                                color: 'var(--pbi-border-light)'
                            }
                        },
                        y: {
                            ticks: {
                                font: { size: 9 }
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Toggle button handlers
        document.getElementById('eligibleBtn').addEventListener('click', function() {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });

        document.getElementById('filedBtn').addEventListener('click', function() {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });

        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                if (this.textContent.includes('Opt-in Monitoring')) {
                    window.location.href = 'opt-in-monitoring.html';
                } else if (this.textContent.includes('CLIENT STATUS REPORTS')) {
                    window.location.href = 'client-status-reports.html';
                } else if (this.textContent.includes('Account Manager Dashboard')) {
                    window.location.href = 'account-manager-dashboard.html';
                } else {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            populateRecentClaims();
            createOutstandingDonutChart();
            createAccountDetailsChart();
            createRecognizedLossChart();
        });
    </script>
</body>
</html>
